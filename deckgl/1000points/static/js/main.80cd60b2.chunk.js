(this["webpackJsonp3DFlus-framework-benchmark"]=this["webpackJsonp3DFlus-framework-benchmark"]||[]).push([[1],{111:function(t,e){},113:function(t,e){},144:function(t,e){},182:function(t,e){},183:function(t,e){},184:function(t,e){},241:function(t,e){},244:function(t,e,a){"use strict";a.r(e);var n=a(9),r=a.n(n),i=a(177),o=a.n(i),c=a(5),s=a.n(c),u=a(13),d=a(14),h=a(11),l=a(1),m=a(2),p=a(7),f=a(8),b=a(266),j=a(281),g=(a(269),a(279),a(274),a(275),a(191)),_=(a(271),a(265)),v=a(272),D=a(142),O=a.n(D),w=a(268),k=a(22),x=a(192),y=(a(278),a(194),a(267)),S=a(143),A=a(67),B={longitude:120.81321,latitude:14.7569,zoom:10},E=0,F=1e3,J=0,L=[],z=0,C=0,I="./data/manila_buildings_larger_than_250.shp",P=["./data/interferometry/los/32.json"],T="./data/Copernicus_DSM_10_merged.tif",M=O.a.scale(["#fda34b","#ff7882","#c8699e","#7046aa","#0c1db8","#2eaaac"]).domain([-30,10]);Object(y.a)().domain([-30,10]).range([4,1]),O.a.scale(["#A0FAB4","#88CA97","#6E9B78","#536E59"]).domain([0,20]);var Q=function(t){Object(p.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={jsonData:[],animatedData:[],shpData:[],terrainData:[],terrainBoundingBox:[]},t._loadAnimatedData=function(t){var e=t.map((function(t){return t.id})),a=Object(S.a)(e).slice(0,1e3),n=[];return a.forEach((function(t){var e="https://ptr.gisat.cz/ftpstorage/applications/emsn091Manila/interferometry/los/32/".concat(t,".json");n.push(new Promise((function(t){return t(Object(w.a)(e,v.a))})))})),Promise.all(n).then((function(t){return t}))},t._createTimeArrays=function(){var e=t.state.animatedData;e.forEach((function(t,a){var n=[];Object.entries(t.properties).forEach((function(t){var e=Object(h.a)(t,2),r=e[0],i=e[1];r.startsWith("d_")&&(n.push(null==i?0:i),0===a&&L.push(r))})),0===a&&(F=n.length),e[a].d_timeline=n,e[a].modified_height=t.properties.h_cop30m+5e4})),t.setState({animatedData:e})},t._animate=function(e){if(e-E<100)window.requestAnimationFrame(t._animate);else{E=e,J<F?J++:J=0;var a=Object(d.a)(t.state.animatedData);a.forEach((function(t,e){0===J&&(a[e].modified_height=t.properties.h_cop30m+5e4),a[e].modified_height=t.modified_height+t.d_timeline[J]})),t.setState({animatedData:a}),window.requestAnimationFrame(t._animate)}},t._loadTIFData=Object(u.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(x.a)(T);case 3:return a=e.sent,e.next=6,a.getImage();case 6:return n=e.sent,t.setState({terrainBoundingBox:n.getBoundingBox()}),e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),t._loadShpData=Object(u.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.a)(I,_.a);case 2:return e=t.sent,z=e.data.length,t.abrupt("return",e.data);case 5:case"end":return t.stop()}}),t)}))),t._loadData=Object(u.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],P.forEach((function(t){return e.push(new Promise((function(e,a){return e(Object(w.a)(t,v.a))})))})),t.abrupt("return",Promise.all(e).then((function(t){var e=t.flat();return C=e.length,e})));case 3:case"end":return t.stop()}}),t)}))),t}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var t=this;this._loadData().then((function(e){t.setState({jsonData:e}),t._loadAnimatedData(e).then((function(e){C=e.length,t.setState({animatedData:e}),t._createTimeArrays(),window.requestAnimationFrame(t._animate)}))}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var t=[];return this.state.terrainData.length,this.state.animatedData.length>0&&t.push(new j.a({id:"animated-layer",data:this.state.animatedData,pickable:!1,coordinateSystem:k.a.LNGLAT,pointSize:6,getPosition:function(t){return[].concat(Object(d.a)(t.geometry.coordinates),[t.modified_height])},getColor:function(t){return M(t.properties.vel_avg).rgb()}})),this.state.shpData.length,this.state.terrainData.length,this.state.jsonData.length,Object(A.jsx)("div",{children:Object(A.jsxs)(b.a,{initialViewState:B,controller:!0,layers:t,children:[Object(A.jsx)(g.a,{mapboxApiAccessToken:"pk.eyJ1IjoibWFyaWRhbmkiLCJhIjoiY2t2aHlhcXNsNGRvejJubHUza2c5ZzR1aiJ9.1kikQS337mSEoQ0LA-RFQQ",mapStyle:this.state.mapStyle}),Object(A.jsxs)("p",{children:["measurement time:",L[J]]}),Object(A.jsxs)("p",{children:["points count: ",C.toLocaleString()]}),Object(A.jsxs)("p",{children:["buildings count: ",z.toLocaleString()]})]})})}}]),a}(n.Component);o.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(Q,{})}),document.getElementById("root"))}},[[244,2,3]]]);
//# sourceMappingURL=main.80cd60b2.chunk.js.map