(this["webpackJsonp3DFlus-framework-benchmark"]=this["webpackJsonp3DFlus-framework-benchmark"]||[]).push([[1],{111:function(t,e){},113:function(t,e){},141:function(t,e){},169:function(t,e){},170:function(t,e){},171:function(t,e){},215:function(t,e){},218:function(t,e,a){"use strict";a.r(e);var n=a(9),r=a.n(n),i=a(164),o=a.n(i),c=a(5),s=a.n(c),u=a(13),l=a(14),d=a(11),m=a(1),h=a(2),p=a(7),f=a(8),b=a(242),g=a(257),j=(a(245),a(255),a(250),a(251),a(178)),_=(a(247),a(241)),v=a(248),O=a(139),D=a.n(O),w=a(244),x=a(22),y=a(179),S=(a(254),a(181),a(243)),k=a(140),A=a(235),B=a(67),E={longitude:120.81321,latitude:14.7569,zoom:10},F=0,P=1e3,T=0,C=[],I=0,L=0,M="./data/manila_buildings_larger_than_250.shp",q=["./data/interferometry/los/32.json"],z="./data/Copernicus_DSM_10_merged.tif",J=D.a.scale(["#fda34b","#ff7882","#c8699e","#7046aa","#0c1db8","#2eaaac"]).domain([-30,10]);Object(S.a)().domain([-30,10]).range([4,1]),D.a.scale(["#A0FAB4","#88CA97","#6E9B78","#536E59"]).domain([0,20]);var N=function(t){Object(p.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={jsonData:[],animatedData:[],shpData:[],terrainData:[],terrainBoundingBox:[],mapStyle:"".length>0?"mapbox://styles/mapbox/satellite-v9":A.a.POSITRON},t._loadAnimatedData=function(t){var e=t.map((function(t){return t.id})),a=Object(k.a)(e).slice(0,1e3),n=[];return a.forEach((function(t){var e="https://ptr.gisat.cz/ftpstorage/applications/emsn091Manila/interferometry/los/32/".concat(t,".json");n.push(new Promise((function(t){return t(Object(w.a)(e,v.a))})))})),Promise.all(n).then((function(t){return t}))},t._createTimeArrays=function(){var e=t.state.animatedData;e.forEach((function(t,a){var n=[];Object.entries(t.properties).forEach((function(t){var e=Object(d.a)(t,2),r=e[0],i=e[1];r.startsWith("d_")&&(n.push(null==i?0:i),0===a&&C.push(r))})),0===a&&(P=n.length),e[a].d_timeline=n,e[a].modified_height=t.properties.h_cop30m+5e4})),t.setState({animatedData:e})},t._animate=function(e){if(e-F<100)window.requestAnimationFrame(t._animate);else{F=e,T<P?T++:T=0;var a=Object(l.a)(t.state.animatedData);a.forEach((function(t,e){0===T&&(a[e].modified_height=t.properties.h_cop30m+5e4),a[e].modified_height=t.modified_height+t.d_timeline[T]})),t.setState({animatedData:a}),window.requestAnimationFrame(t._animate)}},t._loadTIFData=Object(u.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.a)(z);case 3:return a=e.sent,e.next=6,a.getImage();case 6:return n=e.sent,t.setState({terrainBoundingBox:n.getBoundingBox()}),e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),t._loadShpData=Object(u.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.a)(M,_.a);case 2:return e=t.sent,I=e.data.length,t.abrupt("return",e.data);case 5:case"end":return t.stop()}}),t)}))),t._loadData=Object(u.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],q.forEach((function(t){return e.push(new Promise((function(e,a){return e(Object(w.a)(t,v.a))})))})),t.abrupt("return",Promise.all(e).then((function(t){var e=t.flat();return L=e.length,e})));case 3:case"end":return t.stop()}}),t)}))),t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;this._loadData().then((function(e){t.setState({jsonData:e}),t._loadAnimatedData(e).then((function(e){L=e.length,t.setState({animatedData:e}),t._createTimeArrays(),window.requestAnimationFrame(t._animate)}))}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var t=[];return this.state.terrainData.length,this.state.animatedData.length>0&&t.push(new g.a({id:"animated-layer",data:this.state.animatedData,pickable:!1,coordinateSystem:x.a.LNGLAT,pointSize:6,getPosition:function(t){return[].concat(Object(l.a)(t.geometry.coordinates),[t.modified_height])},getColor:function(t){return J(t.properties.vel_avg).rgb()}})),this.state.shpData.length,this.state.terrainData.length,this.state.jsonData.length,Object(B.jsx)("div",{children:Object(B.jsxs)(b.a,{initialViewState:E,controller:!0,layers:t,children:[Object(B.jsx)(j.a,{mapboxApiAccessToken:"",mapStyle:this.state.mapStyle}),Object(B.jsxs)("p",{children:["measurement time:",C[T]]}),Object(B.jsxs)("p",{children:["points count: ",L.toLocaleString()]}),Object(B.jsxs)("p",{children:["buildings count: ",I.toLocaleString()]})]})})}}]),a}(n.Component);o.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(N,{})}),document.getElementById("root"))}},[[218,2,3]]]);
//# sourceMappingURL=main.a5657483.chunk.js.map